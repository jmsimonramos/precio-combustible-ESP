name: Obtener Precio Combustibles

on:
  schedule:
    - cron: '0 7 * * *' # Todos los días a las 7 de la mañana

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout datos repositorio
      uses: actions/checkout@v3
    - name: Set up Python
      uses: actions/setup-python@v3
      with:
        python-version: "3.8"
    - name: Instalación dependencias
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
    - name: Ejecutar Script de Scraping 
      run: python obtenerPrecioCombustible.py
    - name: Commit Cambios
        run: |
          git config --local user.email ${{ secrets.EMAIL }}
          git config --local user.name ${{ secrets.NOMBRE }}
          git add .
          git commit -m "Actualización de precios para el día: $(date '+%d-%m-%Y')"
    - name: Push Cambios
        uses: ad-m/github-push-action@v0.6.0
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          branch: main 
    
